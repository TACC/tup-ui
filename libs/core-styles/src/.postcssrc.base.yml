plugins:
  postcss-import:
    path:
      - 'src/lib'

  postcss-extend: {}

  # https://github.com/TACC/Core-CMS/blob/70a1ca3/conf/css/.postcssrc.yml#L6-L12
  postcss-env-function:
    importFrom:
      - 'src/lib/_themes/default.json'

  postcss-preset-env:
    features:
      preserve: true # CMS expects custom properties

  cssnano:
    preset:
      - 'default'
      - # Both of these are disabled to allow manual CSS build tests
        # The `discardDuplicates` is disabled to prevent hiding duplicate CSS
        discardDuplicates:
          exclude: true
        mergeRules:
          exclude: true

  postcss-banner:
    banner: 'no build id'
    inline: true
    important: true
